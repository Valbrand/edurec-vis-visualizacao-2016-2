<html>
    <head>
        <script src="http://d3js.org/d3.v3.min.js"></script>
        <script src="d3.parsets.js"></script>
        <link rel="stylesheet" type="text/css" href="d3.parsets.css">
    </head>

    <body>
        <div id="content"></div>

        <script>
            d3.select("body").append("h1").text("Podemos fazer isso para os dados categoricos de agua, esgoto etc.");
            var chart = d3.parsets()
              .dimensions(["acesso_internet", "banda_larga", "quantidade_salas_existentes"]);

            var vis = d3.select("#content").append("svg")
            .attr("width", chart.width())
            .attr("height", chart.height());
            /*
            var row = {
                "Survived" : "survived",
                "Sex" : "male",
                "Age" : "child",
                "Class" : "firstClass"
            };
            var second = {
                "Survived" : "perished",
                "Sex" : "female",
                "Age" : "adult",
                "Class" : "secondClass"
            };

            var dataset = [row, second, row, row, row];*/

            d3.json('./escolas2015.json', (schools) => {
                var entries = schools.entries;

                var dataset = [];
                Object.keys(entries).forEach((id) => {
                    var entry = entries[id];

                    if(entry.acesso_internet != null){
                        if(entry.acesso_internet == 1)
                            entry.acesso_internet = "acesso";
                        else
                            entry.acesso_internet = "sem acesso";
                    } else {
                        entry.acesso_internet = "sem acesso";
                    }

                    if(entry.banda_larga != 1){
                        entry.banda_larga = "sem_banda_larga";
                    } else {
                        entry.banda_larga = "banda_larga";
                    }

                    dataset.push(entries[id]);
                });

                console.log(dataset);
                vis.datum(dataset).call(chart);
            });

        </script>
    </body>
</html>
